<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.6"/>
<title>AFF3CT: How to compile and run the code</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">AFF3CT
   </div>
   <div id="projectbrief">A Fast Forward Error Correction Tool!</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.6 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">How to compile and run the code </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>This project use <code>cmake</code> in order to generate the Makefile.</p>
<h2>Install cmake</h2>
<blockquote class="doxtable">
<p>$ sudo apt-get install cmake</p>
<p></p>
</blockquote>
<h2>Generate the Makefile</h2>
<blockquote class="doxtable">
<p>$ mkdir build</p>
<p></p>
</blockquote>
<blockquote class="doxtable">
<p>$ cd build</p>
<p></p>
</blockquote>
<blockquote class="doxtable">
<p>$ cmake ..</p>
<p></p>
</blockquote>
<h3>Facultative cmake options</h3>
<p>Enabling the GNU Scientific Librairy (GSL) (used for the AWGN channel): </p>
<blockquote class="doxtable">
<p>$ cmake .. -DENABLE_GSL=ON</p>
<p></p>
</blockquote>
<p>Enabling the Intel Math Kernel Librairy (MKL) (used for the AWGN channel): </p>
<blockquote class="doxtable">
<p>$ cmake .. -DENABLE_MKL=ON</p>
<p></p>
</blockquote>
<p>Enabling the SystemC/TLM standard between the modules: </p>
<blockquote class="doxtable">
<p>$ cmake .. -DENABLE_SYSTEMC=ON</p>
<p></p>
</blockquote>
<h3>Modifying the CMakeCache.txt</h3>
<p>By default the configuration file will generate a debug binary. If we want to produce a release binary we have to modify the <code>CMAKE_BUILD_TYPE:STRING</code> variable like this: </p>
<pre class="fragment">CMAKE_BUILD_TYPE:STRING=Release
</pre><p>We can also add some flags in the <code>CMAKE_CXX_FLAGS:STRING</code> variable: </p>
<pre class="fragment">CMAKE_CXX_FLAGS:STRING=-Wall -march=native -funroll-loops
</pre><p>There is some specific flags to configure the type of data to use in the simulation modules (you have to add those flags in the <code>CMAKE_CXX_FLAGS:STRING</code> variable):</p>
<ul>
<li><code>-DPREC_64_BIT</code>: use 64-bit precision when it is possible (floating-point representation for the LLRs),</li>
<li><code>-DPREC_32_BIT</code>: use 32-bit precision when it is possible (floating-point representation for the LLRs, this is the default when you don't specify any flag),</li>
<li><code>-DPREC_16_BIT</code>: use 16-bit precision when it is possble (fixed-point representation for the LLRs),</li>
<li><code>-DPREC_8_BIT</code>: use 8-bit precision when it is possible (fixed-point representation for the LLRs),</li>
<li><code>-DMULTI_PREC</code>: build a binary containing all the previous precisions (specific type can be selected at runtime with the <code>--prec</code> option).</li>
</ul>
<p>Notice that some parts of the code use SIMD (Single Instruction Multiple Data) parallelism and this type of instructions often requires additionnal compiler options to be enabled (specific GNU compiler flags are given):</p>
<ul>
<li><code>-msse2</code>: enable the SSE2 set of instructions on x86 CPUs (128-bit vector size, required for 32-bit and 64-bit data),</li>
<li><code>-mssse3</code>: enable the SSSE3 set of instructions on x86 CPUs (128-bit vector size, specifically required for 32-bit data and the <code>SC_FAST</code> decoder),</li>
<li><code>-msse4.1</code>: enable the SSE4.1 set of instructions on x86 CPUs (128-bit vector size, required for 8-bit and 16-bit data),</li>
<li><code>-mavx</code>: enable the AVX set of instructions on x86 CPUs (256-bit vector size, required for 32-bit and 64-bit data),</li>
<li><code>-mavx2</code>: enable the AVX2 set of instructions on x86 CPUs (256-bit vector size, required for 8-bit and 16-bit data),</li>
<li><code>-mfpu=neon</code>: enable the NEON set of instructions on ARMv7 and ARMv8 CPUs (128-bit vector size, required for 8-bit, 16-bit data and 32-bit data),</li>
<li><code>-march=native</code>: let the compiler choose the best set of instructions available on the current architecture (it does not work for ARMv7 architectures since the NEON instructions are not IEEE 754 compatible).</li>
</ul>
<h4>Enabling the cool bash mode</h4>
<p>Enable the colors and boldfaces in the shell with the <code>-DENABLE_COOL_BASH</code> flag: </p>
<pre class="fragment">CMAKE_CXX_FLAGS:STRING=-Wall -march=native -funroll-loops -DENABLE_COOL_BASH
</pre><h2>Compiling with make</h2>
<blockquote class="doxtable">
<p>$ make -j4</p>
<p></p>
</blockquote>
<p>This command will use the generated Makefile.</p>
<h2>Run the code</h2>
<p>Here are some examples of runs. You can skip the computations of the current SNR point with the <code>ctrl+C</code> combination on the keyboard. If you use <code>ctrl+C</code> twice in a small time-step (500ms), the program will stop.</p>
<h3>Decoding of the Polar codes with the Successive Cancellation decoder</h3>
<blockquote class="doxtable">
<p>$ ./bin/aff3ct &ndash;sim-type BFER &ndash;cde-type POLAR -K 1024 -N 2048 -m 1.5 -M 3.01 &ndash;cde-sigma 0.862 &ndash;dec-type SC &ndash;dec-implem FAST</p>
<p></p>
</blockquote>
<p>Expected output: </p>
<pre class="fragment"># -------------------------------------------------
# ---- A FAST FORWARD ERROR CORRECTION TOOL &gt;&gt; ----
# -------------------------------------------------
# Parameters:
# * Simulation ------------------------------------
#    ** Type                    = BFER
#    ** SNR min (m)             = 1.500000 dB
#    ** SNR max (M)             = 3.010000 dB
#    ** SNR step (s)            = 0.100000 dB
#    ** Type of bits            = int (32 bits)
#    ** Type of reals           = float (32 bits)
#    ** Multi-threading (t)     = 1 thread(s)
# * Code ------------------------------------------
#    ** Type                    = POLAR codes
#    ** Info. bits (K)          = 1024
#    ** Codeword size (N)       = 2048
#    ** Sigma for code gen.     = 0.862000
#    ** Frozen bits gen. method = GA
# * Source ----------------------------------------
#    ** Type                    = RAND
# * Encoder ---------------------------------------
#    ** Systematic encoding     = on
# * Modulator -------------------------------------
#    ** Type                    = BPSK
# * Channel ---------------------------------------
#    ** Type                    = AWGN
#    ** Domain                  = LLR
# * Demodulator -----------------------------------
#    ** Sigma square            = on
#    ** Max type                = unused
# * Decoder ---------------------------------------
#    ** Type (D)                = SC
#    ** Implementation          = FAST
# * Monitor ---------------------------------------
#    ** Frame error count (e)   = 100
#
(WW) The GA (Gaussian Approximation) frozen bits generator is inaccurate.
# The simulation is running...
# -------------------------------------------------------------||--------------------------------||---------------------
#   Bit Error Rate (BER) and Frame Error Rate (FER) depending  ||     Decoder throughput and     ||  Global throughput  
#             on the Signal Noise Ratio (SNR) Eb/N0            ||      latency (per thread)      ||  and elapsed time   
# -------------------------------------------------------------||--------------------------------||---------------------
# ------|----------|----------|----------|----------|----------||----------|----------|----------||----------|----------
#   SNR |      FRA |       BE |       FE |      BER |      FER ||     CTHR |     ITHR |  LATENCY || SIM_CTHR |    ET/RT 
#  (dB) |          |          |          |          |          ||   (Mb/s) |   (Mb/s) |     (us) ||   (Mb/s) | (hhmmss) 
# ------|----------|----------|----------|----------|----------||----------|----------|----------||----------|----------
   1.50 |      137 |    14915 |      100 | 1.06e-01 | 7.30e-01 ||    84.68 |    42.34 |    24.19 ||    13.92 | 00h00'00 
   1.60 |      173 |    14517 |      100 | 8.19e-02 | 5.78e-01 ||    91.34 |    45.67 |    22.42 ||    15.42 | 00h00'00 
   1.70 |      200 |    13867 |      100 | 6.77e-02 | 5.00e-01 ||    86.87 |    43.43 |    23.58 ||    14.76 | 00h00'00 
   1.80 |      232 |    13271 |      100 | 5.59e-02 | 4.31e-01 ||    89.39 |    44.70 |    22.91 ||    15.56 | 00h00'00 
   1.90 |      320 |    12323 |      100 | 3.76e-02 | 3.12e-01 ||    91.01 |    45.50 |    22.50 ||    15.94 | 00h00'00 
   2.00 |      449 |    11957 |      100 | 2.60e-02 | 2.23e-01 ||    94.18 |    47.09 |    21.74 ||    16.54 | 00h00'00 
   2.10 |      627 |    11253 |      100 | 1.75e-02 | 1.59e-01 ||    93.19 |    46.60 |    21.98 ||    16.45 | 00h00'00 
   2.20 |      965 |    11123 |      100 | 1.13e-02 | 1.04e-01 ||    94.02 |    47.01 |    21.78 ||    16.71 | 00h00'00 
   2.30 |     1644 |    10204 |      100 | 6.06e-03 | 6.08e-02 ||    94.50 |    47.25 |    21.67 ||    16.75 | 00h00'00 
   2.40 |     2634 |     9371 |      100 | 3.47e-03 | 3.80e-02 ||    94.76 |    47.38 |    21.61 ||    16.84 | 00h00'00 
   2.50 |     3634 |     9491 |      100 | 2.55e-03 | 2.75e-02 ||    94.54 |    47.27 |    21.66 ||    16.79 | 00h00'00 
   2.60 |     6227 |     9152 |      100 | 1.44e-03 | 1.61e-02 ||    86.86 |    43.43 |    23.58 ||    15.64 | 00h00'00 
   2.70 |    11502 |     8602 |      100 | 7.30e-04 | 8.69e-03 ||    82.97 |    41.48 |    24.68 ||    15.07 | 00h00'01 
   2.80 |    24300 |     8359 |      100 | 3.36e-04 | 4.12e-03 ||    94.45 |    47.22 |    21.68 ||    16.86 | 00h00'02 
   2.90 |    58746 |     7961 |      100 | 1.32e-04 | 1.70e-03 ||    92.75 |    46.37 |    22.08 ||    16.55 | 00h00'07 
   3.00 |   130491 |     8150 |      100 | 6.10e-05 | 7.66e-04 ||    93.19 |    46.60 |    21.98 ||    16.65 | 00h00'16 
# End of the simulation.
</pre><h3>Decoding of the Turbo codes with the LTE BCJR decoder (8 states trellis)</h3>
<blockquote class="doxtable">
<p>$ ./bin/aff3ct &ndash;sim-type BFER &ndash;cde-type TURBO -K 1024 -N 3072 -m 0.0 -M 1.01 &ndash;dec-type LTE &ndash;dec-implem FAST -i 6</p>
<p></p>
</blockquote>
<p>Expected output: </p>
<pre class="fragment"># -------------------------------------------------
# ---- A FAST FORWARD ERROR CORRECTION TOOL &gt;&gt; ----
# -------------------------------------------------
# Parameters:
# * Simulation ------------------------------------
#    ** Type                   = BFER
#    ** SNR min (m)            = 0.000000 dB
#    ** SNR max (M)            = 1.010000 dB
#    ** SNR step (s)           = 0.100000 dB
#    ** Type of bits           = int (32 bits)
#    ** Type of reals          = float (32 bits)
#    ** Multi-threading (t)    = 1 thread(s)
# * Code ------------------------------------------
#    ** Type                   = TURBO codes
#    ** Info. bits (K)         = 1024
#    ** Codeword size (N)      = 3072 + 12 (tail bits)
# * Source ----------------------------------------
#    ** Type                   = RAND
# * Encoder ---------------------------------------
#    ** Systematic encoding    = on
#    ** Buffered               = on
# * Interleaver -----------------------------------
#    ** Type                   = LTE
# * Modulator -------------------------------------
#    ** Type                   = BPSK
# * Channel ---------------------------------------
#    ** Type                   = AWGN
#    ** Domain                 = LLR
# * Demodulator -----------------------------------
#    ** Sigma square           = on
#    ** Max type               = unused
# * Decoder ---------------------------------------
#    ** Type (D)               = LTE
#    ** Implementation         = FAST
#    ** Num. of iterations (i) = 6
#    ** Scaling factor         = LTE_VEC
#    ** Max type               = MAX
# * Monitor ---------------------------------------
#    ** Frame error count (e)  = 100
#
# The simulation is running...
# -------------------------------------------------------------||--------------------------------||---------------------
#   Bit Error Rate (BER) and Frame Error Rate (FER) depending  ||     Decoder throughput and     ||  Global throughput  
#             on the Signal Noise Ratio (SNR) Eb/N0            ||      latency (per thread)      ||  and elapsed time   
# -------------------------------------------------------------||--------------------------------||---------------------
# ------|----------|----------|----------|----------|----------||----------|----------|----------||----------|----------
#   SNR |      FRA |       BE |       FE |      BER |      FER ||     CTHR |     ITHR |  LATENCY || SIM_CTHR |    ET/RT 
#  (dB) |          |          |          |          |          ||   (Mb/s) |   (Mb/s) |     (us) ||   (Mb/s) | (hhmmss) 
# ------|----------|----------|----------|----------|----------||----------|----------|----------||----------|----------
   0.00 |      104 |    12658 |      100 | 1.19e-01 | 9.62e-01 ||    10.29 |     3.43 |   298.67 ||     7.04 | 00h00'00 
   0.10 |      111 |    10405 |      100 | 9.15e-02 | 9.01e-01 ||    10.77 |     3.59 |   285.19 ||     7.41 | 00h00'00 
   0.20 |      131 |     9061 |      100 | 6.75e-02 | 7.63e-01 ||    10.75 |     3.58 |   285.68 ||     7.39 | 00h00'00 
   0.30 |      167 |     7703 |      100 | 4.50e-02 | 5.99e-01 ||    11.25 |     3.75 |   273.09 ||     7.85 | 00h00'00 
   0.40 |      216 |     5542 |      100 | 2.51e-02 | 4.63e-01 ||    11.22 |     3.74 |   273.80 ||     7.84 | 00h00'00 
   0.50 |      356 |     5092 |      100 | 1.40e-02 | 2.81e-01 ||    11.37 |     3.79 |   270.09 ||     7.96 | 00h00'00 
   0.60 |      656 |     4600 |      100 | 6.85e-03 | 1.52e-01 ||    11.31 |     3.77 |   271.52 ||     7.95 | 00h00'00 
   0.70 |     1246 |     3987 |      100 | 3.12e-03 | 8.03e-02 ||    11.41 |     3.80 |   269.32 ||     8.02 | 00h00'00 
   0.80 |     2738 |     3562 |      100 | 1.27e-03 | 3.65e-02 ||    11.40 |     3.80 |   269.53 ||     8.01 | 00h00'01 
   0.90 |     8240 |     2935 |      100 | 3.48e-04 | 1.21e-02 ||    11.39 |     3.80 |   269.79 ||     8.00 | 00h00'03 
   1.00 |    28349 |     2717 |      100 | 9.36e-05 | 3.53e-03 ||    11.23 |     3.74 |   273.53 ||     7.88 | 00h00'11 
# End of the simulation.
</pre><p>There is some additional examples of runs in the <code>scripts</code> folder (from the root folder).</p>
<h2>About eclipse</h2>
<p>You may encounter an issue with eclipse, which doesn't handle C++11 as a default behaviour. To solve it you have to add the following:</p>
<ul>
<li>add <code>GXX_EXPERIMENTAL_CXX0X</code> (or <code>__GXX_EXPERIMENTAL_CXX0X__</code>) in Eclipse's symbols (C/C++ General &gt; Path and Symbols &gt; Symbols),</li>
<li>add <code>-std=c++11</code> (or <code>-std=c++1y</code>) in Compiler Options (C/C++ General &gt; Preprocessor Include Paths, Macros etc. &gt; Providers &gt; DCT GCC Built-in Compiler Settings &gt; Commands to get compiler specs). You have to uncheck "Use global provider shared between projects". </li>
</ul>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Mon Oct 10 2016 10:11:03 for AFF3CT by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.6
</small></address>
</body>
</html>
